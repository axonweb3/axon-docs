<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-devops/proxy">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Proxy | Axon Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.axonweb3.io//devops/proxy"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Proxy | Axon Documentation"><meta data-rh="true" name="description" content="When it comes to providing a single RPC endpoint supported by multiple nodes, a reliable load balancer becomes necessary. While HTTP and WebSocket load balancers like NGINX (previously used in Axon-devops) have been widely used, we encountered challenges in implementing advanced JSON-RPC handling, such as rate limiting, caching, and sticky load balancing with them."><meta data-rh="true" property="og:description" content="When it comes to providing a single RPC endpoint supported by multiple nodes, a reliable load balancer becomes necessary. While HTTP and WebSocket load balancers like NGINX (previously used in Axon-devops) have been widely used, we encountered challenges in implementing advanced JSON-RPC handling, such as rate limiting, caching, and sticky load balancing with them."><link data-rh="true" rel="icon" href="/img/axon.svg"><link data-rh="true" rel="canonical" href="https://docs.axonweb3.io//devops/proxy"><link data-rh="true" rel="alternate" href="https://docs.axonweb3.io//devops/proxy" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.axonweb3.io//devops/proxy" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://NN0YKWI8GH-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Axon Documentation" href="/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;400;500;600;700;800&display=swap">
<script src="/js/loadLinks.js"></script><link rel="stylesheet" href="/assets/css/styles.78b2aeec.css">
<link rel="preload" href="/assets/js/runtime~main.c61fdd0f.js" as="script">
<link rel="preload" href="/assets/js/main.1c2616e3.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_gu5v">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/logo_light.png" alt="Axon" class="themedImage_otCA themedImage--light_d4UA"><img src="/img/logo_dark.png" alt="Axon" class="themedImage_otCA themedImage--dark_ePx5"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_kWbt colorModeToggle_GwZs"><button class="clean-btn toggleButton_fOL9 toggleButtonDisabled_STpu" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_DCeJ"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_DFgp"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_UQT_"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_IbdI docsWrapper_HdE8"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_SdI4" type="button"></button><div class="docPage_cDO8"><aside class="theme-doc-sidebar-container docSidebarContainer_otbp"><div class="sidebar_oDHW"><nav class="menu thin-scrollbar menu_vPEQ"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Why Build With Axon</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fundamentals">Axon Fundamentals</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/category/getting-started">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/category/for-dapp-devs">For DApp Devs</a><button aria-label="Toggle the collapsible sidebar category &#x27;For DApp Devs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/category/for-contributors">For Contributors</a><button aria-label="Toggle the collapsible sidebar category &#x27;For Contributors&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/staking">Staking</a><button aria-label="Toggle the collapsible sidebar category &#x27;Staking&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/category/contract-info">Contract Info</a><button aria-label="Toggle the collapsible sidebar category &#x27;Contract Info&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contract/system_contacts">System Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contract/precompile_contracts">Precompile Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contract/genesis_contracts">Genesis Contracts</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/category/api">API</a><button aria-label="Toggle the collapsible sidebar category &#x27;API&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api/latest_version">Latest Version</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/category/devops">DevOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;DevOps&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devops/configuration">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devops/monitoring-platform">Monitoring Platform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devops/proc-macros">Procedural Macros in Instrumentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devops/explorer">Explorer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devops/faucet">Faucet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/devops/proxy">Proxy</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_BYXc"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_nDJs"><div class="docItemContainer_OGiL"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_k3Z9" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_F5H6"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/category/devops"><span itemprop="name">DevOps</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Proxy</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_QCOD theme-doc-toc-mobile tocMobile_N0YI"><button type="button" class="clean-btn tocCollapsibleButton_pHwF">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Axon-Proxy</h1><p>When it comes to providing a single RPC endpoint supported by multiple nodes, a reliable load balancer becomes necessary. While HTTP and WebSocket load balancers like NGINX (previously used in <a href="https://github.com/axonweb3/axon-devops" target="_blank" rel="noopener noreferrer">Axon-devops</a>) have been widely used, we encountered challenges in implementing advanced JSON-RPC handling, such as rate limiting, caching, and sticky load balancing with them.</p><p>To address these limitations, we have built a new JSON-RPC load balancer Axon Proxy. By harnessing Rust&#x27;s async ecosystem, Axon-Proxy offers robust support for complex use cases. Axon-Proxy will soon become the recommended JSON-RPC load balancer in Axon-devops; it is also a sensible choice for load balancing in other Ethereum JSON-RPC compatible blockchain nodes.</p><h2 class="anchor anchorWithStickyNavbar_FNw8" id="implementation">Implementation<a class="hash-link" href="#implementation" title="Direct link to heading">​</a></h2><p>Building a JSON-RPC load balancer in Rust is straightforward using crates like tokio, axum, reqwest and serde_json. Axum is a popular web framework built on top of hyper and tokio. In axum HTTP and WebSocket handlers, we parse the JSON-RPC request, split it if it’s a batch, and handle each request, either by returning a rate-limiting response, cached response or by forwarding it to a backend node.</p><p>The tower crate has <a href="https://docs.rs/tower/latest/tower/balance/index.html" target="_blank" rel="noopener noreferrer">load balancing</a> and <a href="https://docs.rs/tower/latest/tower/discover/index.html" target="_blank" rel="noopener noreferrer">service discovery</a> functionalities and they are very good inspirations. But the service discovery mechanism doesn’t fit with how we want to implement health checking and failover, so we ended up not using tower load balancing.</p><h3 class="anchor anchorWithStickyNavbar_FNw8" id="rate-limiting">Rate Limiting<a class="hash-link" href="#rate-limiting" title="Direct link to heading">​</a></h3><p>Axon-proxy supports rate limiting by IP (or IP and method name). Rate counters are stored in Redis so that they are shared among multiple instances of axon-proxy. Redis is still a lot slower compared to local memory, so it’s planned to add in-process caching of already rate-limited keys, similar to ingress-nginx memchached rate-limiter.</p><h3 class="anchor anchorWithStickyNavbar_FNw8" id="caching">Caching<a class="hash-link" href="#caching" title="Direct link to heading">​</a></h3><p>Axon-proxy provides optional caching support for some methods, such as <code>eth_call</code> and <code>eth_estimateGas</code> for now. The cache key is the hash of the current tip block hash, the request method name and canonically serialized parameters. In-process request coalescing is also supported to prevent <a href="https://en.wikipedia.org/wiki/Cache_stampede" target="_blank" rel="noopener noreferrer">dog-piling</a>.</p><h3 class="anchor anchorWithStickyNavbar_FNw8" id="filter-id-sticky-load-balancing">Filter-ID Sticky Load Balancing<a class="hash-link" href="#filter-id-sticky-load-balancing" title="Direct link to heading">​</a></h3><p>Filter-related methods, e.g. <a href="https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getfilterchanges" target="_blank" rel="noopener noreferrer"><code>eth_getFilterChanges</code></a>, are stateful. In Axon, filter states are stored in the local memory of each node, so the load balancer must forward filter requests to the corresponding node. In Axon-proxy, a mapping between filter IDs and nodes is stored and filter requests are forwarded accordingly.</p><h3 class="anchor anchorWithStickyNavbar_FNw8" id="load-balancing-health-checking-and-failover">Load Balancing, Health Checking, and Failover<a class="hash-link" href="#load-balancing-health-checking-and-failover" title="Direct link to heading">​</a></h3><p>Two load balancing methods are supported: p2c least requests and client IP consistent hashing.</p><p>When using <a href="https://www.eecs.harvard.edu/~michaelm/postscripts/handbook2001.pdf" target="_blank" rel="noopener noreferrer">p2c</a> least requests, two nodes are randomly chosen, and the one with fewer outstanding requests is selected. This should distribute requests uniformly among the backend nodes.</p><p>When using client IP consistent hashing, requests from a certain IP are mapped to a certain backend node, as long as the backend nodes don&#x27;t change. When they
do change, only a minimum fraction of IPs will be mapped to a different node. The specific hashing method we use is <a href="https://www.snia.org/sites/default/files/SDC15_presentations/dist_sys/Jason_Resch_New_Consistent_Hashings_Rev.pdf" target="_blank" rel="noopener noreferrer">weighed rendezvous hashing</a>. Rendezvous hashing has O(n) complexity where n is the number of nodes, but we don’t expect to have more than a few hundred nodes, so it’s fast enough. It’s also easy to implement and plays nicely with health checking.</p><p>Active health checking is supported: when enabled axon-proxy will periodically check whether the backend nodes are healthy. Unhealthy nodes are excluded in load balancing. We are also planning to enhance the health checking by also considering block syncing status: nodes that fall behind or haven’t caught up yet probably shouldn’t be selected (inspired by <a href="https://github.com/emeraldpay/dshackle" target="_blank" rel="noopener noreferrer">dshackle</a>).</p><p>In case a node doesn’t respond timely but active health checking hasn’t detected the issue yet, the failover mechanism comes into play: a second node is attempted as long as it is considered safe.  Unlike an HTTP load balancer that only sees POST requests, not knowing which ones are <a href="https://serverfault.com/questions/528653" target="_blank" rel="noopener noreferrer">safe to retry</a>, Axon-proxy can examine the method name and retry all stateless or idempotent requests.</p><h3 class="anchor anchorWithStickyNavbar_FNw8" id="config-reloading">Config Reloading<a class="hash-link" href="#config-reloading" title="Direct link to heading">​</a></h3><p>Most config options can be reloaded without restarting. Connection pools for backend nodes and Redis are kept across reloads. Load balancing and health checking status are not kept for now, which can be optimized in the future.</p><h3 class="anchor anchorWithStickyNavbar_FNw8" id="metrics">Metrics<a class="hash-link" href="#metrics" title="Direct link to heading">​</a></h3><p>Various metrics are recorded in Axon-proxy and exposed in Prometheus text format. Aside from several histograms, the majority of these metrics are atomic variables, in which some are already available for load balancing, so that exposing them as metrics has no extra cost except for encoding them on scraping.</p><h2 class="anchor anchorWithStickyNavbar_FNw8" id="performance">Performance<a class="hash-link" href="#performance" title="Direct link to heading">​</a></h2><p>Rust and axum both demonstrate remarkable performance (Refer to <a href="https://www.techempower.com/benchmarks/#section=data-r21" target="_blank" rel="noopener noreferrer">this</a> web framework benchmark ranking). We have also implemented optimizations such as serde_json <code>&amp;RawValue</code> to minimize data copies, byte slicing to reduce memory consumption, and vectorized I/O to further enhance efficiency.</p><p>To assess its performance, I have run a simple benchmark by calling a minimal ping/pong method through the proxy on a Ryzen 7950x desktop machine. The proxy is running with 12 threads. Rate limiting and request logging are disabled. The performance looks pretty good with the Req/Sec of 202357.66 and the max latency of only 3.94 ms:</p><div class="codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-text codeBlock_zHgq thin-scrollbar"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token plain">$ rewrk -t4 -c64 -d 10s  --host http://127.0.0.1:8000 -m post -b &#x27;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:1,&quot;method&quot;:&quot;@ping&quot;}&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Beginning round 1...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Benchmarking 64 connections @ http://127.0.0.1:8000 for 10 second(s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Latencies:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Avg      Stdev    Min      Max</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0.32ms   0.06ms   0.08ms   3.94ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Requests:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Total: 2023663 Req/Sec: 202357.66</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Transfer:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Total: 413.00 MB Transfer Rate: 41.30 MB/Sec</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg class="copyButtonIcon_t3l1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_IiZV" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>There’s a performance caveat in a specific case: large batch requests take longer to process if the proxy has high network latency to the backend nodes. This is because each request in the batch needs at least an RTT (real-time text) to be handled. It’s currently not planned to change this because large batch requests should probably be limited in production. It’s recommended to deploy the proxy close to the backend nodes if this is a concern. In the future, we may add a more latency-aware load balancing method, which will also help with this issue if the backend nodes have different latency.</p><p>Check out Axon-proxy’s <a href="https://github.com/axonweb3/axon-proxy/" target="_blank" rel="noopener noreferrer">GitHub repo</a> and try it out if you find it interesting or useful. Feel free to reach out to us if you find any problems, or have any questions or suggestions.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/axonweb3/axon-docs/edit/main/docs/devops/proxy.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_NulP" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated__GQF"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-08-30T09:51:24.000Z">Aug 30, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/devops/faucet"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Faucet</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_IS5x thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#implementation" class="table-of-contents__link toc-highlight">Implementation</a><ul><li><a href="#rate-limiting" class="table-of-contents__link toc-highlight">Rate Limiting</a></li><li><a href="#caching" class="table-of-contents__link toc-highlight">Caching</a></li><li><a href="#filter-id-sticky-load-balancing" class="table-of-contents__link toc-highlight">Filter-ID Sticky Load Balancing</a></li><li><a href="#load-balancing-health-checking-and-failover" class="table-of-contents__link toc-highlight">Load Balancing, Health Checking, and Failover</a></li><li><a href="#config-reloading" class="table-of-contents__link toc-highlight">Config Reloading</a></li><li><a href="#metrics" class="table-of-contents__link toc-highlight">Metrics</a></li></ul></li><li><a href="#performance" class="table-of-contents__link toc-highlight">Performance</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item">
                <img id="footer-logo" src="/img/logo_light.png" alt="Axon">
                <a href="mailto:axon@axonweb3.io">axon@axonweb3.io</a>
                </li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><div id="footer-links-placeholder">
                </div></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">This website is maintained by AxonWeb3.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c61fdd0f.js"></script>
<script src="/assets/js/main.1c2616e3.js"></script>
</body>
</html>